<!-- bottom-nav.component.html - CON ICONE FISSE E LOGICA MENU -->
<nav class="bottom-nav d-md-none">
  <div class="nav-container" [class.container-extended]="!isLogged && (isTavoloAttivo() || isInMenuMode())">

    <!-- üè† LOGO HOME EPISUSHI (SEMPRE VISIBILE) -->
    <div class="nav-item nav-item-home"
         [class.active]="isActiveRoute('')"
         (click)="navigateToHome()">
      <div class="home-logo">
        <span class="logo-epi">EPI</span>
        <span class="logo-sushi">SUSHI</span>
      </div>
      <span class="nav-label">Home</span>
    </div>

    <!-- ===== üîê SEZIONE ADMIN (SOLO SE LOGGATA) ===== -->
    <ng-container *ngIf="isLogged">
      <!-- Dashboard Admin -->
      <div class="nav-item nav-item-admin"
           [class.active]="isActiveRoute('/dashboard')"
           (click)="navigateTo('/dashboard')">
        <i class="bi bi-speedometer2 nav-icon"></i>
        <span class="nav-label">Dashboard</span>
      </div>

      <!-- Cucina Admin -->
      <div class="nav-item nav-item-admin"
           [class.active]="isActiveRoute('/dashboard/cucina')"
           (click)="navigateTo('/dashboard/cucina')">
        <i class="bi bi-house-gear-fill nav-icon"></i>
        <span class="nav-label">Cucina</span>
      </div>

      <!-- Logout Admin -->
      <div class="nav-item nav-item-logout"
           (click)="logout()">
        <i class="bi bi-box-arrow-right nav-icon"></i>
        <span class="nav-label">Logout</span>
      </div>
    </ng-container>

    <!-- ===== üë§ SEZIONE CLIENTE (SOLO SE NON LOGGATA) ===== -->
    <ng-container *ngIf="!isLogged">

      <!-- Storico Ordini (SEMPRE VISIBILE quando in modalit√† menu o tavolo attivo) -->
      <div class="nav-item nav-item-tavolo"
           *ngIf="isTavoloAttivo() || isInMenuMode()"
           [class.active]="isActiveRoute('/storico-ordini')"
           (click)="navigateTo('/storico-ordini')">
        <div class="cart-icon-container">
          <i class="bi bi-journal-text nav-icon"></i>
          <div class="cart-badge" *ngIf="getNumeroOrdini() > 0">{{ getNumeroOrdini() }}</div>
          <div class="cart-badge cart-badge-empty" *ngIf="getNumeroOrdini() === 0">0</div>
        </div>
        <span class="nav-label">Storico</span>
      </div>

      <!-- Chiedi Conto (SEMPRE VISIBILE quando in modalit√† menu, ma solo se conto non richiesto) -->
      <div class="nav-item nav-item-conto"
           *ngIf="(isTavoloAttivo() || isInMenuMode()) && !isContoRichiesto()"
           (click)="confermaRichiestaConto()">
        <i class="bi bi-receipt-cutoff nav-icon"></i>
        <span class="nav-label">
          <div class="conto-label">Chiedi Conto</div>
          <div class="conto-amount" *ngIf="getTotaleComplessivo() > 0">{{ getTotaleComplessivo() | currency:'EUR':'symbol':'1.2-2' }}</div>
          <div class="conto-amount conto-zero" *ngIf="getTotaleComplessivo() === 0">‚Ç¨0.00</div>
        </span>
      </div>

      <!-- Conto Richiesto (quando stato = conto_richiesto) -->
      <div class="nav-item nav-item-conto-richiesto"
           *ngIf="isContoRichiesto()">
        <i class="bi bi-check-circle-fill nav-icon"></i>
        <span class="nav-label">
          <div class="conto-label">Richiesto</div>
          <div class="conto-amount">{{ getTotaleComplessivo() | currency:'EUR':'symbol':'1.2-2' }}</div>
        </span>
      </div>

      <!-- Menu con Dropdown (sempre visibile per clienti) -->
      <div class="nav-item nav-dropdown"
           [class.active]="isActiveRoute('/menu')"
           (click)="toggleMenuDropdown()">
        <i class="bi bi-book-fill nav-icon"></i>
        <span class="nav-label">Menu</span>

        <!-- Dropdown Menu Categories -->
        <div class="menu-dropdown"
             [class.show]="showMenuDropdown">
          <div class="dropdown-grid">
            <a (click)="navigateTo('/menu/antipasti')" class="dropdown-item">
              <span class="category-emoji">ü•ü</span> Antipasti
            </a>
            <a (click)="navigateTo('/menu/zuppe')" class="dropdown-item">
              <span class="category-emoji">üçú</span> Zuppe
            </a>
            <a (click)="navigateTo('/menu/primi')" class="dropdown-item">
              <span class="category-emoji">üçù</span> Primi
            </a>
            <a (click)="navigateTo('/menu/hosomaki')" class="dropdown-item">
              <span class="category-emoji">üç£</span> Hosomaki
            </a>
            <a (click)="navigateTo('/menu/uramaki')" class="dropdown-item">
              <span class="category-emoji">üç±</span> Uramaki
            </a>
            <a (click)="navigateTo('/menu/temaki')" class="dropdown-item">
              <span class="category-emoji">üçô</span> Temaki
            </a>
            <a (click)="navigateTo('/menu/sushi')" class="dropdown-item">
              <span class="category-emoji">üçö</span> Sushi
            </a>
            <a (click)="navigateTo('/menu/secondi')" class="dropdown-item">
              <span class="category-emoji">üêü</span> Secondi
            </a>
            <a (click)="navigateTo('/menu/dolci')" class="dropdown-item">
              <span class="category-emoji">üç°</span> Dolci
            </a>
            <a (click)="navigateTo('/menu/bibite')" class="dropdown-item">
              <span class="category-emoji">üçµ</span> Bibite
            </a>
          </div>
        </div>
      </div>

      <!-- Recensioni (sempre visibile per clienti) -->
      <div class="nav-item"
           [class.active]="isActiveRoute('/reviews')"
           (click)="navigateTo('/reviews')">
        <i class="bi bi-star-fill nav-icon"></i>
        <span class="nav-label">Recensioni</span>
      </div>

      <!-- Reset Tavolo (solo se conto richiesto) -->
      <div class="nav-item nav-item-reset"
           *ngIf="isContoRichiesto()"
           (click)="resetTavolo()">
        <i class="bi bi-arrow-clockwise nav-icon"></i>
        <span class="nav-label">Reset</span>
      </div>

    </ng-container>

  </div>

  <!-- Badge Stato Tavolo Flottante (solo per clienti con tavolo attivo)
  <div *ngIf="!isLogged && isTavoloAttivo()" class="tavolo-status-floating">
    <div class="status-content">
      <div class="status-icon">
        <i class="bi"
           [class.bi-calculator]="!isContoRichiesto()"
           [class.bi-check-circle-fill]="isContoRichiesto()"></i>
      </div>
      <div class="status-text">
        <div class="status-label">{{ isContoRichiesto() ? 'Conto Finale' : 'Totale Tavolo' }}</div>
        <div class="status-total">{{ getTotaleComplessivo() | currency:'EUR':'symbol':'1.2-2' }}</div>
      </div>
    </div>
  </div> -->

  <!-- Overlay per chiudere dropdown -->
  <div class="dropdown-overlay"
       *ngIf="showMenuDropdown"
       (click)="onBackdropClick()"></div>

  <!-- üÜï MODAL CONFIRM SEMPLICE -->
  
</nav>
